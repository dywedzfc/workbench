(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46bc47de"],{"2f42":function(t,e,i){},4013:function(t,e,i){"use strict";i("f95a")},4280:function(t,e,i){},"54b0":function(t,e,i){},"623c":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"todo-list",style:t.todoListStyle},[i("div",{staticClass:"todo-list-search"},[i("el-input",{ref:"input",staticClass:"search-input",on:{input:t.handleSearchInput},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearchEnterKeyup.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[i("el-button",{staticClass:"search-button",attrs:{slot:"append",type:"primary",icon:t.searchIcon},on:{click:t.handleSearchClick},slot:"append"})],1)],1),i("div",{staticClass:"todo-list-body",style:t.todoListBodyStyle},[t._t("default")],2)])},l=[],a={name:"TodoList",props:{query:String,searchIcon:{type:String,default:"el-icon-search"},width:String,height:String},data(){return{search:""}},computed:{todoListStyle(){const t=this.width;return{width:t}},todoListBodyStyle(){const t=this.height;return{height:t}}},watch:{query:{handler(t){this.search=t},immediate:!0}},mounted(){this.$refs["input"].focus()},methods:{handleSearchInput(){this.$listeners["update:query"]&&this.$emit("update:query",this.search),this.$listeners["search"]&&this.$emit("search",this.query)},handleSearchEnterKeyup(){this.$listeners["enter"]&&this.$emit("enter")},handleSearchClick(){this.$listeners["click"]&&this.$emit("click",this.query)}}},r=a,s=(i("641b"),i("2877")),n=Object(s["a"])(r,o,l,!1,null,"5aba5d4c",null);e["a"]=n.exports},"641b":function(t,e,i){"use strict";i("2f42")},7651:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page"},[i("div",{staticClass:"page-header"},[t.back?i("div",{staticClass:"page-button btn-back",class:t.icon,on:{click:t.handleBackClick}}):t._e(),i("div",{staticClass:"title"},[t._t("title",(function(){return[t._v(t._s(t.title))]}))],2),t.$slots.tool?i("div",{staticClass:"tool"},[t._t("tool")],2):t._e()]),i("div",{staticClass:"page-body"},[t._t("default")],2)])},l=[],a={name:"Page",props:{title:String,back:{type:Boolean,default:!0},icon:{type:String,default:"el-icon-back"}},methods:{handleBackClick(){this.$listeners["back"]?this.$emit("back"):this.$router.back()}}},r=a,s=(i("4013"),i("2877")),n=Object(s["a"])(r,o,l,!1,null,"53c7c5c6",null);e["a"]=n.exports},"7f21":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"panel-query"},[i("div",{ref:"query-bar",staticClass:"query-bar"},[t._t("query-bar")],2),i("div",{staticClass:"query-body",style:t.bodyStyle()},[t._t("default")],2),i("div",{ref:"footer",staticClass:"query-footer"},[t._t("footer")],2)])},l=[],a={name:"PanelQuery",computed:{},methods:{bodyStyle(){var t,e;const i={},{"query-bar":o,footer:l}=this.$slots;let a=0;return o&&(a+=(null===(t=this.$refs["query-bar"])||void 0===t?void 0:t.offsetHeight)||0),l&&(a+=(null===(e=this.$refs["footer"])||void 0===e?void 0:e.offsetHeight)||0),i.height=`calc(100% - ${a}px)`,i}}},r=a,s=(i("9c39"),i("2877")),n=Object(s["a"])(r,o,l,!1,null,"13a8874e",null);e["a"]=n.exports},"8bd0":function(t,e,i){"use strict";i("cebc")},"9c39":function(t,e,i){"use strict";i("4280")},a539:function(t,e,i){"use strict";i("54b0")},cebc:function(t,e,i){},cf72:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"todo-list-item",on:{click:t.handleTodoItemClick}},[i("div",{staticClass:"todo-body"},[t._t("default")],2),t.edit||t.remove?i("div",{staticClass:"todo-tool",class:{one:t.isOneTodoToolItem,two:t.isTwoTodoToolItem}},[t.edit?i("div",{staticClass:"todo-tool-item edit el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.handleTodoItemEditClick.apply(null,arguments)}}}):t._e(),t.remove?i("div",{staticClass:"todo-tool-item remove el-icon-delete",on:{click:function(e){return e.stopPropagation(),t.handleTodoItemRemoveClick.apply(null,arguments)}}}):t._e()]):t._e()])},l=[],a={name:"TodoItem",props:{data:Object,edit:{type:Boolean,default:!0},remove:{type:Boolean,default:!0}},computed:{useTodoToolCount(){let t=0;return this.edit&&t++,this.remove&&t++,t},isOneTodoToolItem(){return 1==this.useTodoToolCount},isTwoTodoToolItem(){return 2==this.useTodoToolCount}},mounted(){},methods:{handleTodoItemClick(){this.$listeners["click"]&&this.$emit("click",this.data)},handleTodoItemEditClick(){this.$listeners["edit"]&&this.$emit("edit",this.data)},handleTodoItemRemoveClick(){this.$listeners["remove"]&&this.$emit("remove",this.data)}}},r=a,s=(i("a539"),i("2877")),n=Object(s["a"])(r,o,l,!1,null,"249f88b0",null);e["a"]=n.exports},e5b6:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page",{attrs:{title:"项目列表",icon:"el-icon-s-home"},on:{back:t.handlePageBack},scopedSlots:t._u([{key:"tool",fn:function(){return[i("el-button",{staticClass:"page-button",attrs:{type:"text",icon:"card"==t.projectType?"el-icon-receiving":"el-icon-files"},on:{click:t.handleViewTypeClick}})]},proxy:!0}])},["table"==t.projectType?i("panel-query",{scopedSlots:t._u([{key:"footer",fn:function(){return[i("el-pagination",{attrs:{background:"","current-page":t.tableCurrentPage,"page-size":t.tablePageSize,total:t.filterProjectList.length},on:{"update:currentPage":function(e){t.tableCurrentPage=e},"update:current-page":function(e){t.tableCurrentPage=e}}})]},proxy:!0}],null,!1,219853446)},[i("el-form",{staticClass:"query-form",attrs:{slot:"query-bar",inline:""},slot:"query-bar"},[i("el-form-item",[i("el-input",{attrs:{placeholder:"项目名称"},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.handleQueryClick}},[t._v("查询")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleAddClick}},[t._v("添加")])],1)],1),i("el-table",{staticClass:"query-table",attrs:{data:t.filterTableList,border:"",stripe:"",size:"small",height:"100%"}},[i("el-table-column",t._b({attrs:{prop:"title",label:"项目名称","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._l(t.titleHighlight(o.title),(function(e,o){var l=e.title,a=e.type;return["text"==a?[t._v(t._s(l))]:t._e(),"mark"==a?i("span",{key:o,staticClass:"highlight"},[t._v(t._s(l))]):t._e()]}))]}}],null,!1,2223177389)},"el-table-column",t.tableColProps,!1)),i("el-table-column",t._b({attrs:{prop:"abbreviation",label:"简称","min-width":"140"}},"el-table-column",t.tableColProps,!1)),i("el-table-column",t._b({attrs:{prop:"fileName",label:"文件名","min-width":"160"}},"el-table-column",t.tableColProps,!1)),i("el-table-column",t._b({attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.fileName?i("el-button",{staticClass:"table-button",attrs:{icon:"el-icon-folder-opened",type:"text"},on:{click:function(e){return t.handleTodoListDetail(o)}}}):t._e(),i("el-button",{staticClass:"table-button",attrs:{icon:"el-icon-edit",type:"text"},on:{click:function(e){return t.handleTodoListEdit(o)}}}),i("el-button",{staticClass:"table-button",attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(e){return t.handleTodoListRemove(o)}}})]}}],null,!1,1389369417)},"el-table-column",t.tableColProps,!1))],1)],1):i("div",{staticClass:"template-wrapper"},[i("todo-list",{staticClass:"project-list",attrs:{"search-icon":"el-icon-plus",width:"600px",query:t.query},on:{"update:query":function(e){t.query=e},enter:t.handleProjectEnter,click:t.handleProjectClick}},t._l(t.filterProjectList,(function(e){return i("todo-item",{key:e.id,attrs:{data:e},on:{click:t.handleTodoItemClick,edit:t.handleTodoListEdit,remove:t.handleTodoListRemove}},[i("div",{staticClass:"title"},[t._l(t.titleHighlight(e.title),(function(e,o){var l=e.title,a=e.type;return["text"==a?[t._v(t._s(l))]:t._e(),"mark"==a?i("span",{key:o,staticClass:"highlight"},[t._v(t._s(l))]):t._e()]}))],2)])})),1)],1)],1)},l=[],a=i("2ef0"),r=i.n(a),s=i("2f62"),n=i("7651"),c=i("7f21"),u=i("623c"),d=i("cf72"),h=i("12db"),p=i("4260");const{ipcRenderer:b}=window.require("electron");var m={name:"ProjectList",components:{Page:n["a"],PanelQuery:c["a"],TodoList:u["a"],TodoItem:d["a"]},data(){return{query:"",type:""}},computed:{...Object(s["b"])({hotkeys:h["g"],projectList:h["l"],projectType:h["q"],projectTable:h["o"],tablePageSize:h["x"]}),tableColProps(){return{align:"center"}},tablePage(){const{currentPage:t}=this.projectTable,e=this.tablePageSize;return{currentPage:t,pageSize:e}},filterProjectList(){const t=this.query.trim(),e=r.a.filter(this.projectList,t=>!t.removeState);return Object(p["i"])(t,e)},filterTableList(){const t=this.filterProjectList,{currentPage:e,pageSize:i}=this.tablePage,o=(e-1)*i,l=e*i;return t.slice(o,l)},tableCurrentPage:{get(){return this.projectTable.currentPage},set(t){Object(h["X"])(t)}}},mounted(){this.projectType||Object(h["Y"])("table"),this.tableCurrentPage=1,Object(h["J"])()},methods:{handlePageBack(){this.$router.push("/")},handleViewTypeClick(){Object(h["Y"])("table"==this.projectType?"card":"table")},handleQueryClick(){Object(h["J"])(),this.tableCurrentPage=1},handleAddClick(){""!=this.query.trim()?this.handleProjectClick():Object(p["h"])("请输入项目名称")},handleProjectEnter(){""!=this.query.trim()&&this.handleProjectClick()},handleProjectClick(){const t=this.query.trim();if(!t)return void Object(p["h"])("没有填写数据无法添加。");if(t.includes(" "))return void Object(p["h"])("无法添加,你输入的是查询格式。");const e=r.a.filter(this.projectList,e=>e.title==t);e.length?Object(p["f"])("有重名的项目，是否继续？").then(this.addProject).catch(()=>{}):this.addProject()},handleTodoItemClick(t){t.fileName&&("Command"==this.hotkeys?(Object(h["W"])(t.id),this.$router.push({name:"查看项目"})):(Object(h["W"])(t.id),this.$router.push({name:"项目文件"})))},handleTodoListDetail(t){Object(h["W"])(t.id),this.$router.push({name:"项目文件"})},handleTodoListEdit(t){Object(h["W"])(t.id),this.$router.push({name:"编辑项目"})},handleTodoListRemove({id:t,title:e,fileName:i}){b.invoke("get-table-folder-count",i).then(({code:i,data:o})=>{200==i?this.removePrompt({id:t,title:e},o):this.removePrompt({id:t,title:e})}).catch(()=>{this.removePrompt({id:t,title:e})})},addProject(){Object(h["z"])({title:this.query.trim()},({code:t,msg:e})=>{200==t?(Object(p["g"])(e),"card"==this.projectType&&(this.query="")):Object(p["h"])(e),Object(h["J"])()})},removePrompt({id:t,title:e},i){let o="";i&&(o=`发现有${i}条，项目表文件，`),Object(p["f"])(`${o}是否确认移除 "${e}项目"？`).then(()=>{Object(h["L"])(t,({code:t})=>{200==t?(Object(p["g"])("移除成功"),Object(h["J"])()):Object(p["h"])("移除失败")})}).catch(()=>{})},titleHighlight(t){const e=this.query.trim();return Object(p["l"])(t,e)}}},f=m,y=(i("8bd0"),i("2877")),k=Object(y["a"])(f,o,l,!1,null,"64026138",null);e["default"]=k.exports},f95a:function(t,e,i){}}]);