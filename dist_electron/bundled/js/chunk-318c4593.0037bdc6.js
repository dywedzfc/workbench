(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-318c4593"],{"2f42":function(t,e,i){},4013:function(t,e,i){"use strict";i("f95a")},4280:function(t,e,i){},"457d":function(t,e,i){},"54b0":function(t,e,i){},"623c":function(t,e,i){"use strict";var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"todo-list",style:t.todoListStyle},[i("div",{staticClass:"todo-list-search"},[i("el-input",{ref:"input",staticClass:"search-input",on:{input:t.handleSearchInput},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearchEnterKeyup.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[i("el-button",{staticClass:"search-button",attrs:{slot:"append",type:"primary",icon:t.searchIcon},on:{click:t.handleSearchClick},slot:"append"})],1)],1),i("div",{staticClass:"todo-list-body",style:t.todoListBodyStyle},[t._t("default")],2)])},a=[],o={name:"TodoList",props:{query:String,searchIcon:{type:String,default:"el-icon-search"},width:String,height:String},data(){return{search:""}},computed:{todoListStyle(){const t=this.width;return{width:t}},todoListBodyStyle(){const t=this.height;return{height:t}}},watch:{query:{handler(t){this.search=t},immediate:!0}},mounted(){this.$refs["input"].focus()},methods:{handleSearchInput(){this.$listeners["update:query"]&&this.$emit("update:query",this.search),this.$listeners["search"]&&this.$emit("search",this.query)},handleSearchEnterKeyup(){this.$listeners["enter"]&&this.$emit("enter")},handleSearchClick(){this.$listeners["click"]&&this.$emit("click",this.query)}}},s=o,n=(i("641b"),i("2877")),r=Object(n["a"])(s,l,a,!1,null,"5aba5d4c",null);e["a"]=r.exports},"641b":function(t,e,i){"use strict";i("2f42")},7651:function(t,e,i){"use strict";var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page"},[i("div",{staticClass:"page-header"},[t.back?i("div",{staticClass:"page-button btn-back",class:t.icon,on:{click:t.handleBackClick}}):t._e(),i("div",{staticClass:"title"},[t._t("title",(function(){return[t._v(t._s(t.title))]}))],2),t.$slots.tool?i("div",{staticClass:"tool"},[t._t("tool")],2):t._e()]),i("div",{staticClass:"page-body"},[t._t("default")],2)])},a=[],o={name:"Page",props:{title:String,back:{type:Boolean,default:!0},icon:{type:String,default:"el-icon-back"}},methods:{handleBackClick(){this.$listeners["back"]?this.$emit("back"):this.$router.back()}}},s=o,n=(i("4013"),i("2877")),r=Object(n["a"])(s,l,a,!1,null,"53c7c5c6",null);e["a"]=r.exports},"7f21":function(t,e,i){"use strict";var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"panel-query"},[i("div",{ref:"query-bar",staticClass:"query-bar"},[t._t("query-bar")],2),i("div",{staticClass:"query-body",style:t.bodyStyle()},[t._t("default")],2),i("div",{ref:"footer",staticClass:"query-footer"},[t._t("footer")],2)])},a=[],o={name:"PanelQuery",computed:{},methods:{bodyStyle(){var t,e;const i={},{"query-bar":l,footer:a}=this.$slots;let o=0;return l&&(o+=(null===(t=this.$refs["query-bar"])||void 0===t?void 0:t.offsetHeight)||0),a&&(o+=(null===(e=this.$refs["footer"])||void 0===e?void 0:e.offsetHeight)||0),i.height=`calc(100% - ${o}px)`,i}}},s=o,n=(i("9c39"),i("2877")),r=Object(n["a"])(s,l,a,!1,null,"13a8874e",null);e["a"]=r.exports},"891b":function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page",{attrs:{title:"项目表文件"},on:{back:t.handlePageBack},scopedSlots:t._u([{key:"tool",fn:function(){return[i("el-button",{staticClass:"page-button",attrs:{type:"text",icon:"card"==t.projectType?"el-icon-receiving":"el-icon-files"},on:{click:t.handleViewTypeClick}})]},proxy:!0}])},["table"==t.projectType?i("panel-query",{scopedSlots:t._u([{key:"footer",fn:function(){return[i("el-pagination",{attrs:{background:"","current-page":t.tableCurrentPage,"page-size":t.tablePageSize,total:t.filterProjectTableList.length},on:{"update:currentPage":function(e){t.tableCurrentPage=e},"update:current-page":function(e){t.tableCurrentPage=e}}})]},proxy:!0}],null,!1,3351451800)},[i("el-form",{staticClass:"query-form",attrs:{slot:"query-bar",inline:""},slot:"query-bar"},[i("el-form-item",[i("el-input",{attrs:{placeholder:"任务名称"},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.handleQueryClick}},[t._v("查询")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleAddClick}},[t._v("添加")])],1)],1),i("el-table",{staticClass:"query-table",attrs:{data:t.filterTableList,border:"",stripe:"",size:"small",height:"100%"}},[i("el-table-column",t._b({attrs:{prop:"title",label:"任务名称","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[t._l(t.titleHighlight(l.title),(function(e,l){var a=e.title,o=e.type;return["text"==o?[t._v(t._s(a))]:t._e(),"mark"==o?i("span",{key:l,staticClass:"highlight"},[t._v(t._s(a))]):t._e()]}))]}}],null,!1,2223177389)},"el-table-column",t.tableColProps,!1)),i("el-table-column",t._b({attrs:{prop:"fileName",label:"文件名","min-width":"140"}},"el-table-column",t.tableColProps,!1)),i("el-table-column",t._b({attrs:{prop:"apiAddress",label:"API地址","min-width":"180"}},"el-table-column",t.tableColProps,!1)),i("el-table-column",t._b({attrs:{prop:"remark",label:"备注","min-width":"240"}},"el-table-column",t.tableColProps,!1)),i("el-table-column",t._b({attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[l.fileName?i("el-button",{staticClass:"table-button",attrs:{icon:"el-icon-tickets",type:"text"},on:{click:function(e){return t.handleTodoListDetail(l)}}}):t._e(),i("el-button",{staticClass:"table-button",attrs:{icon:"el-icon-edit",type:"text"},on:{click:function(e){return t.handleTodoListEdit(l)}}}),i("el-button",{staticClass:"table-button",attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(e){return t.handleTodoListRemove(l)}}})]}}],null,!1,835887152)},"el-table-column",t.tableColProps,!1))],1)],1):i("div",{staticClass:"template-wrapper"},[i("todo-list",{staticClass:"project-list",attrs:{"search-icon":"el-icon-plus",width:"600px",query:t.query},on:{"update:query":function(e){t.query=e},enter:t.handleTableEnter,click:t.handleTableClick}},t._l(t.filterProjectTableList,(function(e){return i("todo-item",{key:e.id,attrs:{data:e},on:{click:t.handleTodoItemClick,edit:t.handleTodoListEdit,remove:t.handleTodoListRemove}},[i("div",{staticClass:"title"},[t._l(t.titleHighlight(e.title),(function(e,l){var a=e.title,o=e.type;return["text"==o?[t._v(t._s(a))]:t._e(),"mark"==o?i("span",{key:l,staticClass:"highlight"},[t._v(t._s(a))]):t._e()]}))],2)])})),1)],1)],1)},a=[],o=i("2ef0"),s=i.n(o),n=i("2f62"),r=i("7651"),c=i("7f21"),u=i("623c"),d=i("cf72"),h=i("12db"),b=i("4260"),p={name:"ProjectFile",components:{Page:r["a"],PanelQuery:c["a"],TodoList:u["a"],TodoItem:d["a"]},data(){return{query:"",tableList:{data:[],count:0}}},computed:{...Object(n["b"])({projectType:h["q"],projectItem:h["n"],tableFileTable:h["w"],tablePageSize:h["x"],tableFileList:h["u"],tableFileCount:h["p"]}),tableColProps(){return{align:"center"}},tablePage(){const{currentPage:t}=this.tableFileTable,e=this.tablePageSize;return{currentPage:t,pageSize:e}},filterProjectTableList(){const t=this.query.trim(),e=s.a.filter(this.tableFileList,t=>!t.removeState);return Object(b["i"])(t,e)},filterTableList(){const t=this.filterProjectTableList,{currentPage:e,pageSize:i}=this.tablePage,l=(e-1)*i,a=e*i;return t.slice(l,a)},tableCurrentPage:{get(){return this.tableFileTable.currentPage},set(t){Object(h["ab"])(t)}}},mounted(){"id"in this.projectItem||this.$router.push({name:"项目列表"}),Object(h["eb"])(this.projectItem.fileName)},methods:{handlePageBack(){this.$router.push({name:"项目列表"})},handleViewTypeClick(){Object(h["Y"])("table"==this.projectType?"card":"table")},handleTableEnter(){""!=this.query.trim()&&this.handleTableClick()},handleTableClick(){const t=this.query.trim();if(!t)return void Object(b["h"])("没有填写数据无法添加。");if(t.includes(" "))return void Object(b["h"])("无法添加,你输入的是查询格式。");const e=s.a.filter(this.tableFileList,e=>e.title==t);e.length?Object(b["f"])("有重名的表文件，是否继续？").then(this.addTableFile).catch(()=>{}):this.addTableFile()},handleTodoItemClick(t){Object(h["bb"])(t.id),this.$router.push({name:"编辑项目文件内容"})},handleQueryClick(){Object(h["eb"])(),this.tableCurrentPage=1},handleAddClick(){""!=this.query.trim()?this.handleTableClick():Object(b["h"])("请输入任务名称")},handleTodoListDetail(t){Object(h["bb"])(t.id),this.$router.push({name:"编辑项目文件内容"})},handleTodoListEdit(t){Object(h["bb"])(t.id),this.$router.push({name:"编辑项目文件信息"})},handleTodoListRemove({id:t,title:e}){Object(b["f"])(`是否确认移除 "${e}表"？`).then(()=>{Object(h["N"])(t,this.projectItem,({code:t})=>{200==t?(Object(b["g"])("移除成功"),Object(h["eb"])(this.projectItem.fileName)):Object(b["h"])("移除失败")})}).catch(()=>{})},addTableFile(){Object(h["C"])({title:this.query.trim(),projectId:this.projectItem.id}),this.$router.push({name:"添加项目文件信息"})},titleHighlight(t){const e=this.query.trim();return Object(b["l"])(t,e)}}},m=p,f=(i("d15f"),i("2877")),y=Object(f["a"])(m,l,a,!1,null,"f73c666a",null);e["default"]=y.exports},"9c39":function(t,e,i){"use strict";i("4280")},a539:function(t,e,i){"use strict";i("54b0")},cf72:function(t,e,i){"use strict";var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"todo-list-item",on:{click:t.handleTodoItemClick}},[i("div",{staticClass:"todo-body"},[t._t("default")],2),t.edit||t.remove?i("div",{staticClass:"todo-tool",class:{one:t.isOneTodoToolItem,two:t.isTwoTodoToolItem}},[t.edit?i("div",{staticClass:"todo-tool-item edit el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.handleTodoItemEditClick.apply(null,arguments)}}}):t._e(),t.remove?i("div",{staticClass:"todo-tool-item remove el-icon-delete",on:{click:function(e){return e.stopPropagation(),t.handleTodoItemRemoveClick.apply(null,arguments)}}}):t._e()]):t._e()])},a=[],o={name:"TodoItem",props:{data:Object,edit:{type:Boolean,default:!0},remove:{type:Boolean,default:!0}},computed:{useTodoToolCount(){let t=0;return this.edit&&t++,this.remove&&t++,t},isOneTodoToolItem(){return 1==this.useTodoToolCount},isTwoTodoToolItem(){return 2==this.useTodoToolCount}},mounted(){},methods:{handleTodoItemClick(){this.$listeners["click"]&&this.$emit("click",this.data)},handleTodoItemEditClick(){this.$listeners["edit"]&&this.$emit("edit",this.data)},handleTodoItemRemoveClick(){this.$listeners["remove"]&&this.$emit("remove",this.data)}}},s=o,n=(i("a539"),i("2877")),r=Object(n["a"])(s,l,a,!1,null,"249f88b0",null);e["a"]=r.exports},d15f:function(t,e,i){"use strict";i("457d")},f95a:function(t,e,i){}}]);